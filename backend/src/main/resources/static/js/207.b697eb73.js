"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[207],{7047:function(e,s,a){a.r(s),a.d(s,{default:function(){return B}});var t=a(4562),r=a(9582),o=a(4886),l=a(9256),n=a(3863),i=a(4324),d=a(7808),u=function(){var e=this,s=e._self._c;return s("div",[s("HeaderComponent",{attrs:{title:"Usuarios"}}),s(l.Z,[e.datatable.items?s(r.Z,[s(o.ZB,[s(d.Z,{attrs:{label:"Buscador","hide-details":""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[s(t.Z,{attrs:{color:"rgba(34, 56, 67, 0.85)",dark:""},on:{click:function(s){e.dialogs.addUser=!0}}},[e._v(" Agregar Usuario ")])]},proxy:!0}],null,!1,1609366816),model:{value:e.datatable.search,callback:function(s){e.$set(e.datatable,"search",s)},expression:"datatable.search"}}),s(n.Z,{staticClass:"elevation-0",attrs:{headers:e.datatable.headers,items:e.datatable.items,search:e.datatable.search},scopedSlots:e._u([{key:"item",fn:function({item:a}){return[s("tr",[s("td",[e._v(e._s(a.username))]),s("td",e._l(a.roles,(function(a,t){return s("span",{key:t,staticClass:"mr-2"},[e._v(e._s(a.name))])})),0),s("td",[s(t.Z,{attrs:{icon:""},on:{click:function(s){return e.deleteUser(a)}}},[s(i.Z,[e._v("mdi-delete")])],1)],1)])]}}],null,!1,1696382493)})],1)],1):e._e(),s("AddUser",{on:{saved:s=>e.newUserSaved(s)},model:{value:e.dialogs.addUser,callback:function(s){e.$set(e.dialogs,"addUser",s)},expression:"dialogs.addUser"}})],1)],1)},c=[],m=(a(7658),a(9792)),f=a(739),h=a(344),p=a(4127),v=a(4061),b=a(5125),w=a(8279),k=a(2933),Z=function(){var e=this,s=e._self._c;return s(k.Z,{attrs:{value:e.localShow}},[s(v.Z,{attrs:{"hide-overlay":"",persistent:""},model:{value:e.localShow,callback:function(s){e.localShow=s},expression:"localShow"}},[s(r.Z,{staticStyle:{width:"600px"}},[s(o.EB,{staticClass:"d-flex justify-space-between align-center mb-4"},[s("div",[e._v("Agregar Usuario")]),s("div",[s(t.Z,{attrs:{icon:""},on:{click:function(s){return e.closeAll()}}},[s(i.Z,[e._v("mdi-close")])],1)],1)]),s(o.ZB,[s(b.Z,{ref:"form"},[s(d.Z,{attrs:{label:"Nombre del usuario",rules:e.rules.username},model:{value:e.form.username,callback:function(s){e.$set(e.form,"username",s)},expression:"form.username"}}),s(d.Z,{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",rules:e.rules.password,type:e.showPassword?"text":"password",label:"Contrase침a del usuario",counter:""},on:{"click:append":function(s){e.showPassword=!e.showPassword}},model:{value:e.form.password,callback:function(s){e.$set(e.form,"password",s)},expression:"form.password"}}),s(h.Z,{attrs:{items:e.allRoles,label:"Roles","item-text":"name","return-object":"",filled:"",rounded:"",chips:"",multiple:""},scopedSlots:e._u([{key:"selection",fn:function(a){return[s(p.Z,e._b({attrs:{"input-value":a.selected,close:""},on:{click:a.select,"click:close":function(s){return e.remove(a.item)}}},"v-chip",a.attrs,!1),[e._v(" "+e._s(a.item.name)+" ")])]}},{key:"item",fn:function(a){return[s(w.km,[s(w.V9,{domProps:{innerHTML:e._s(a.item.name)}})],1)]}}]),model:{value:e.form.roles,callback:function(s){e.$set(e.form,"roles",s)},expression:"form.roles"}})],1)],1),s(o.h7,{staticClass:"d-flex justify-end"},[s(t.Z,{attrs:{color:"rgba(34, 56, 67, 0.85)",dark:""},on:{click:function(s){e.$refs.form.validate()&&e.save()}}},[e._v("Guardar")])],1)],1)],1)],1)},_=[],x={props:{value:{type:Boolean}},data:()=>({localShow:!1,showPassword:!1,allRoles:null,form:{username:"",password:"",roles:[]},rules:{username:[e=>!!e||"Se requiere un nombre de usuario"],password:[e=>!!e||"Se requiere una contrase침a"]}}),watch:{value:function(e){this.localShow=e}},async mounted(){let e=await m.E.get("/admin/roles");this.allRoles=e.data},methods:{closeAll(){this.$refs.form.reset(),this.$emit("input",!1)},remove(e){const s=this.form.roles.indexOf(e);s>=0&&this.form.roles.splice(s,1)},async save(){let e=await m.E.post("/admin/users",this.form),s=e.data;this.$emit("saved",s),this.closeAll()}}},S=x,y=a(1001),g=(0,y.Z)(S,Z,_,!1,null,null,null),U=g.exports,C=a(3761),$={components:{HeaderComponent:f.Z,AddUser:U},data:()=>({snackbarStore:(0,C.i)(),datatable:{items:null,headers:[{text:"Nombre",value:"name",width:"20%"},{text:"Permisos",value:"",width:"60%"},{text:"",value:"",width:"20%"}],search:""},dialogs:{addUser:!1}}),async mounted(){let e=await m.E.get("/admin/users");this.datatable.items=e.data},methods:{newUserSaved(e){this.datatable.items.push(e),this.snackbarStore.open("Se cre칩 el nuevo usuario: "+e.username+".")},async deleteUser(e){let s=await m.E["delete"]("/admin/users",{data:e});if(200==s.status){const s=this.datatable.items.indexOf(e);s>=0&&this.datatable.items.splice(s,1),this.snackbarStore.open("Se borr칩 el usuario "+e.username+".")}}}},A=$,P=(0,y.Z)(A,u,c,!1,null,null,null),B=P.exports}}]);
//# sourceMappingURL=207.b697eb73.js.map