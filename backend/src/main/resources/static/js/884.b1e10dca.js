"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[884],{2884:function(t,e,a){a.r(e),a.d(e,{default:function(){return Ct}});var s=a(266),i=a(9256),o=(a(7658),a(1884),a(144)),n=a(1767),l=a(5352);const r=["sm","md","lg","xl"],c=["start","end","center"];function u(t,e){return r.reduce(((a,s)=>(a[t+(0,l.jC)(s)]=e(),a)),{})}const d=t=>[...c,"baseline","stretch"].includes(t),h=u("align",(()=>({type:String,default:null,validator:d}))),m=t=>[...c,"space-between","space-around"].includes(t),p=u("justify",(()=>({type:String,default:null,validator:m}))),f=t=>[...c,"space-between","space-around","stretch"].includes(t),v=u("alignContent",(()=>({type:String,default:null,validator:f}))),g={align:Object.keys(h),justify:Object.keys(p),alignContent:Object.keys(v)},b={align:"align",justify:"justify",alignContent:"align-content"};function y(t,e,a){let s=b[t];if(null!=a){if(e){const a=e.replace(t,"");s+=`-${a}`}return s+=`-${a}`,s.toLowerCase()}}const w=new Map;var _=o.ZP.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:d},...h,justify:{type:String,default:null,validator:m},...p,alignContent:{type:String,default:null,validator:f},...v},render(t,{props:e,data:a,children:s}){let i="";for(const n in e)i+=String(e[n]);let o=w.get(i);if(!o){let t;for(t in o=[],g)g[t].forEach((a=>{const s=e[a],i=y(t,a,s);i&&o.push(i)}));o.push({"no-gutters":e.noGutters,"row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),w.set(i,o)}return t(e.tag,(0,n.ZP)(a,{staticClass:"row",class:o}),s)}}),S=function(){var t=this,e=t._self._c;return e("div",[e("HeaderComponent",{attrs:{title:"Seguridad"}}),e(i.Z,[e(_,[e(s.Z,[e("Roles")],1),e(s.Z,[e("Authorities")],1)],1)],1)],1)},Z=[],k=a(739),A=a(4562),x=a(9582),C=a(4886),$=a(3863),B=a(4324),j=a(7808),R=a(1452),E=a(6878),N=a(3016),T=a(908),O=a(5943),L=a(4101),D=a(7678),I=(0,D.Z)(E.Z,N.Z,T.Z,O.Z).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},openOnFocus:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:()=>({calculatedMinWidth:0,closeDependents:!1}),computed:{calculatedLeft(){const{activator:t,content:e}=this.dimensions,a=!this.bottom&&!this.left&&!this.top&&!this.right,s=!1!==this.attach?t.offsetLeft:t.left;let i=0;return this.top||this.bottom||a?i=s+t.width/2-e.width/2:(this.left||this.right)&&(i=s+(this.right?t.width:-e.width)+(this.right?10:-10)),this.nudgeLeft&&(i-=parseInt(this.nudgeLeft)),this.nudgeRight&&(i+=parseInt(this.nudgeRight)),`${this.calcXOverflow(i,this.dimensions.content.width)}px`},calculatedTop(){const{activator:t,content:e}=this.dimensions,a=!1!==this.attach?t.offsetTop:t.top;let s=0;return this.top||this.bottom?s=a+(this.bottom?t.height:-e.height)+(this.bottom?10:-10):(this.left||this.right)&&(s=a+t.height/2-e.height/2),this.nudgeTop&&(s-=parseInt(this.nudgeTop)),this.nudgeBottom&&(s+=parseInt(this.nudgeBottom)),!1===this.attach&&(s+=this.pageYOffset),`${this.calcYOverflow(s)}px`},classes(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY(){return this.top||this.bottom},offsetX(){return this.left||this.right},styles(){return{left:this.calculatedLeft,maxWidth:(0,l.kb)(this.maxWidth),minWidth:(0,l.kb)(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount(){this.$nextTick((()=>{this.value&&this.callActivate()}))},mounted(){"v-slot"===(0,l.sp)(this,"activator",!0)&&(0,L.N6)("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate(){this.runDelay("close")},genActivatorListeners(){const t=R.Z.options.methods.genActivatorListeners.call(this);return this.openOnFocus&&(t.focus=t=>{this.getActivator(t),this.runDelay("open")},t.blur=t=>{this.getActivator(t),this.runDelay("close")}),t.keydown=t=>{t.keyCode===l.Do.esc&&(this.getActivator(t),this.runDelay("close"))},t},genActivatorAttributes(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition(){const t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:{[this.contentClass]:!0,menuable__content__active:this.isActive,"v-tooltip__content--fixed":this.activatorFixed},style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render(t){return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((()=>[this.genTransition()])),this.genActivator()])}}),P=function(){var t=this,e=t._self._c;return e("div",[t.datatable.items?e(x.Z,[e(C.EB,[t._v(" Permisos ")]),e(C.ZB,[e(j.Z,{attrs:{label:"Buscador","hide-details":""},scopedSlots:t._u([{key:"append-outer",fn:function(){return[e(A.Z,{attrs:{color:"rgba(34, 56, 67, 0.85)",dark:""},on:{click:function(e){t.dialogs.addAuthority=!0}}},[t._v(" Agregar permiso ")])]},proxy:!0}],null,!1,2531273881),model:{value:t.datatable.search,callback:function(e){t.$set(t.datatable,"search",e)},expression:"datatable.search"}}),e($.Z,{staticClass:"elevation-0",attrs:{headers:t.datatable.headers,items:t.datatable.items,search:t.datatable.search},scopedSlots:t._u([{key:"item",fn:function({item:a}){return[e("tr",[e("td",[t._v(t._s(a.name))]),e("td",[e(I,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(A.Z,t._g(t._b({attrs:{icon:""},on:{click:function(e){return t.deleteAuthority(a)}}},"v-btn",i,!1),s),[e(B.Z,[t._v("mdi-delete")])],1)]}}],null,!0)},[e("span",[t._v("Borrar rol")])])],1)])]}}],null,!1,585568780)})],1)],1):t._e(),e("AddAuthority",{on:{saved:e=>t.newAuthoritySaved(e)},model:{value:t.dialogs.addAuthority,callback:function(e){t.$set(t.dialogs,"addAuthority",e)},expression:"dialogs.addAuthority"}})],1)},W=[],F=a(9792),G=a(4061),H=a(5125),M=a(2933),q=function(){var t=this,e=t._self._c;return e(M.Z,{attrs:{value:t.localShow}},[e(G.Z,{attrs:{"hide-overlay":"",persistent:""},model:{value:t.localShow,callback:function(e){t.localShow=e},expression:"localShow"}},[e(x.Z,{staticStyle:{width:"600px"}},[e(C.EB,{staticClass:"d-flex justify-space-between align-center mb-4"},[e("div",[t._v("Agregar permiso")]),e("div",[e(A.Z,{attrs:{icon:""},on:{click:t.closeAll}},[e(B.Z,[t._v("mdi-close")])],1)],1)]),e(C.ZB,[e(H.Z,{ref:"form"},[e(j.Z,{attrs:{label:"Nombre del permiso",rules:t.rules.name},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),e(C.h7,{staticClass:"d-flex justify-end"},[e(A.Z,{attrs:{color:"rgba(34, 56, 67, 0.85)",dark:""},on:{click:function(e){t.$refs.form.validate()&&t.save()}}},[t._v("Guardar")])],1)],1)],1)],1)},z=[],Y={props:{value:{type:Boolean}},data:()=>({localShow:!1,form:{name:""},rules:{name:[t=>!!t||"Se requiere un nombre"]}}),watch:{value:function(t){this.localShow=t}},async mounted(){},methods:{closeAll(){this.$refs.form.reset(),this.$emit("input",!1)},async save(){let t=await F.E.post("/admin/authorities",this.form),e=t.data;this.$emit("saved",e),this.closeAll()}}},V=Y,X=a(1001),J=(0,X.Z)(V,q,z,!1,null,null,null),K=J.exports,Q=a(3761),U={components:{AddAuthority:K},data:()=>({snackbarStore:(0,Q.i)(),datatable:{items:null,headers:[{text:"Nombre",value:"name",width:"75%"},{text:"",value:"",width:"25%"}],search:""},dialogs:{addAuthority:!1}}),async mounted(){let t=await F.E.get("/admin/authorities");this.datatable.items=t.data},methods:{newAuthoritySaved(t){this.datatable.items.push(t),this.snackbarStore.open("Se creó el nuevo permiso: "+t.name+".")},async deleteAuthority(t){let e=await F.E["delete"]("/admin/authorities",{data:t});if(200==e.status){const e=this.datatable.items.indexOf(t);e>=0&&this.datatable.items.splice(e,1),this.snackbarStore.open("Se borró el permiso "+t.name+".")}}}},tt=U,et=(0,X.Z)(tt,P,W,!1,null,null,null),at=et.exports,st=function(){var t=this,e=t._self._c;return e("div",[t.datatable.items?e(x.Z,[e(C.EB,[t._v(" Roles ")]),e(C.ZB,[e(j.Z,{attrs:{label:"Buscador","hide-details":""},scopedSlots:t._u([{key:"append-outer",fn:function(){return[e(A.Z,{attrs:{color:"rgba(34, 56, 67, 0.85)",dark:""},on:{click:function(e){t.dialogs.addRole=!0}}},[t._v(" Agregar rol ")])]},proxy:!0}],null,!1,716399058),model:{value:t.datatable.search,callback:function(e){t.$set(t.datatable,"search",e)},expression:"datatable.search"}}),e($.Z,{staticClass:"elevation-0",attrs:{headers:t.datatable.headers,items:t.datatable.items,search:t.datatable.search},scopedSlots:t._u([{key:"item",fn:function({item:a}){return[e("tr",[e("td",[t._v(t._s(a.name))]),e("td",[e(I,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(A.Z,t._g(t._b({attrs:{icon:""},on:{click:function(e){return t.showAuthorities(a)}}},"v-btn",i,!1),s),[e(B.Z,[t._v("mdi-eye")])],1)]}}],null,!0)},[e("span",[t._v("Ver permisos")])]),e(I,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:i}){return[e(A.Z,t._g(t._b({attrs:{icon:""},on:{click:function(e){return t.deleteRole(a)}}},"v-btn",i,!1),s),[e(B.Z,[t._v("mdi-delete")])],1)]}}],null,!0)},[e("span",[t._v("Borrar rol")])])],1)])]}}],null,!1,2237704881)})],1)],1):t._e(),e("AddRole",{on:{saved:e=>t.newRoleSaved(e)},model:{value:t.dialogs.addRole,callback:function(e){t.$set(t.dialogs,"addRole",e)},expression:"dialogs.addRole"}}),e("ShowAuthorities",{attrs:{roleName:t.dialogs.authorities.roleName,authorities:t.dialogs.authorities.items},model:{value:t.dialogs.authorities.show,callback:function(e){t.$set(t.dialogs.authorities,"show",e)},expression:"dialogs.authorities.show"}})],1)},it=[],ot=a(344),nt=a(4127),lt=a(8279),rt=function(){var t=this,e=t._self._c;return e(M.Z,{attrs:{value:t.localShow}},[e(G.Z,{attrs:{"hide-overlay":"",persistent:""},model:{value:t.localShow,callback:function(e){t.localShow=e},expression:"localShow"}},[e(x.Z,{staticStyle:{width:"600px"}},[e(C.EB,{staticClass:"d-flex justify-space-between align-center mb-4"},[e("div",[t._v("Agregar Rol")]),e("div",[e(A.Z,{attrs:{icon:""},on:{click:t.closeAll}},[e(B.Z,[t._v("mdi-close")])],1)],1)]),e(C.ZB,[e(H.Z,{ref:"form"},[e(j.Z,{attrs:{label:"Nombre del rol",rules:t.rules.name},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),e(ot.Z,{attrs:{items:t.allAuthorities,label:"Permisos","item-text":"name","return-object":"",filled:"",rounded:"",chips:"",multiple:""},scopedSlots:t._u([{key:"selection",fn:function(a){return[e(nt.Z,t._b({attrs:{"input-value":a.selected,close:""},on:{click:a.select,"click:close":function(e){return t.remove(a.item)}}},"v-chip",a.attrs,!1),[t._v(" "+t._s(a.item.name)+" ")])]}},{key:"item",fn:function(a){return[e(lt.km,[e(lt.V9,{domProps:{innerHTML:t._s(a.item.name)}})],1)]}}]),model:{value:t.form.authorities,callback:function(e){t.$set(t.form,"authorities",e)},expression:"form.authorities"}})],1)],1),e(C.h7,{staticClass:"d-flex justify-end"},[e(A.Z,{attrs:{color:"rgba(34, 56, 67, 0.85)",dark:""},on:{click:function(e){t.$refs.form.validate()&&t.save()}}},[t._v("Guardar")])],1)],1)],1)],1)},ct=[],ut={props:{value:{type:Boolean}},data:()=>({localShow:!1,allAuthorities:null,form:{name:"",authorities:null},rules:{name:[t=>!!t||"Se requiere un nombre"]}}),watch:{value:function(t){this.localShow=t}},async mounted(){let t=await F.E.get("/admin/authorities");this.allAuthorities=t.data},methods:{closeAll(){this.$refs.form.reset(),this.$emit("input",!1)},remove(t){const e=this.form.authorities.indexOf(t);e>=0&&this.form.authorities.splice(e,1)},async save(){let t=await F.E.post("/admin/roles",this.form),e=t.data;this.$emit("saved",e),this.closeAll()}}},dt=ut,ht=(0,X.Z)(dt,rt,ct,!1,null,null,null),mt=ht.exports,pt=function(){var t=this,e=t._self._c;return e(M.Z,{attrs:{value:t.localShow}},[e(G.Z,{attrs:{"hide-overlay":"",persistent:""},model:{value:t.localShow,callback:function(e){t.localShow=e},expression:"localShow"}},[e(x.Z,{staticStyle:{width:"600px"}},[e(C.EB,{staticClass:"d-flex justify-space-between align-center mb-4"},[e("div",[t._v("Permisos para el rol: "+t._s(t.roleName))]),e("div",[e(A.Z,{attrs:{icon:""},on:{click:t.closeAll}},[e(B.Z,[t._v("mdi-close")])],1)],1)]),e(C.ZB,[e("ul",t._l(t.authorities,(function(a){return e("li",{key:a.id},[t._v(" "+t._s(a.name)+" ")])})),0)]),e(C.h7,{staticClass:"d-flex justify-end"},[e(A.Z,{attrs:{color:"rgba(34, 56, 67, 0.85)",dark:""},on:{click:t.closeAll}},[t._v("Cerrar")])],1)],1)],1)],1)},ft=[],vt={props:{value:{type:Boolean},roleName:{type:String},authorities:{type:Array}},data:()=>({localShow:!1}),watch:{value:function(t){this.localShow=t}},async mounted(){},methods:{closeAll(){this.$emit("input",!1)}}},gt=vt,bt=(0,X.Z)(gt,pt,ft,!1,null,null,null),yt=bt.exports,wt={components:{AddRole:mt,ShowAuthorities:yt},data:()=>({snackbarStore:(0,Q.i)(),datatable:{items:null,headers:[{text:"Nombre",value:"name",width:"75%"},{text:"",value:"",width:"25%"}],search:""},dialogs:{addRole:!1,authorities:{show:!1,roleName:null,items:[]}}}),async mounted(){let t=await F.E.get("/admin/roles");this.datatable.items=t.data},methods:{newRoleSaved(t){this.datatable.items.push(t),this.snackbarStore.open("Se creó el nuevo rol: "+t.name)},showAuthorities(t){this.dialogs.authorities.show=!0,this.dialogs.authorities.roleName=t.name,this.dialogs.authorities.items=t.authorities},async deleteRole(t){let e=await F.E["delete"]("/admin/roles",{data:t});if(200==e.status){const e=this.datatable.items.indexOf(t);e>=0&&this.datatable.items.splice(e,1),this.snackbarStore.open("Se borró el rol "+t.name+".")}}}},_t=wt,St=(0,X.Z)(_t,st,it,!1,null,null,null),Zt=St.exports,kt={components:{HeaderComponent:k.Z,Roles:Zt,Authorities:at}},At=kt,xt=(0,X.Z)(At,S,Z,!1,null,null,null),Ct=xt.exports}}]);
//# sourceMappingURL=884.b1e10dca.js.map